{% extends "base.html" %}
{% block content %}
<h1 style="text-align:center; font-size:32px; font-weight:900; margin-bottom:30px; color:#7c5cff;">
  Restaurants
</h1>

<!-- Filter form -->
<form class="form card subtle" method="get" 
      style="max-width:1250px; margin:0 -640px 40px 300px; padding:24px; border-radius:16px; 
             background:rgba(244, 11, 11, 0.03); box-shadow:0 8px 24px rgba(0,0,0,.4); text-align:center;">
  <div class="row" style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center;">
    <label style="flex:1; min-width: 600px; color:#8ea1c7; font-weight:600;">
      Search
      <input name="q" value="{{ q }}" placeholder="e.g. Grill, Biryani..." 
             style="width:100%; padding:12px; border-radius:12px; border:1px solid #1b2a4a; 
                    background:rgba(0,0,0,.15); color:#e8f0ff; text-align:center;">
    </label>
    <label style="flex:1; min-width:180px; color:#8ea1c7; font-weight:600;">
      Status
      <select name="status" 
              style="width:100%; padding:12px; border-radius:12px; border:1px solid #1b2a4a; 
                     background:rgba(0,0,0,.15); color:#e8f0ff; text-align:center;">
        <option value="">All</option>
        <option value="Active" {{ "selected" if status=="Active" else "" }}>Active</option>
        <option value="Busy" {{ "selected" if status=="Busy" else "" }}>Busy</option>
        <option value="Inactive" {{ "selected" if status=="Inactive" else "" }}>Inactive</option>
      </select>
    </label>
    <label class="check" style="display:flex; align-items:center; gap:8px; color:#8ea1c7; font-weight:600;">
      <input type="checkbox" name="active_only" value="1" {{ "checked" if active_only else "" }}>
      Only Active
    </label>
  </div>
  <div class="row" style="margin-top:20px; display:flex; justify-content:center; gap:14px;">
    <button class="btn" type="submit" 
            style="padding:12px 20px; border-radius:12px; background:linear-gradient(135deg,#7c5cff,#4f46e5); 
                   border:none; color:white; font-weight:700; cursor:pointer;">
      Apply
    </button>
    <a class="btn ghost" href="{{ url_for('public_cart') }}" 
       style="padding:12px 20px; border-radius:12px; border:1px solid #1b2a4a; 
              background:transparent; color:#e8f0ff; font-weight:700; text-align:center;">
      View Cart
    </a>
  </div>
</form>

<!-- Restaurant cards grid -->
<div class="gridcards" 
     style="display:grid; grid-template-columns:repeat(5, 1fr); gap:24px; 
            width:100%; padding:0 40px;">

  {% for r in restaurants %}
    <a class="rest-card" href="{{ url_for('public_restaurant_menu', rid=r.restaurant_id) }}"
       style="border:1px solid #1b2a4a; border-radius:16px; padding:24px; text-decoration:none; 
              background:rgba(255,255,255,.03); color:#e8f0ff; transition:all .25s ease; 
              box-shadow:0 0 0 1px rgba(124,92,255,.25), 0 8px 24px rgba(0,0,0,.4); 
              text-align:center; height:220px; width: 210px; display:flex; flex-direction:column; justify-content:center;">
      <div class="rest-title" style="font-size:20px; font-weight:800; margin-bottom:6px;">
        {{ r.name }}
      </div>
      <div class="rest-meta" style="color:#8ea1c7; margin-bottom:10px; font-size:14px;">
        {{ r.address }}
      </div>
      <div class="rest-tags" style="display:flex; justify-content:center; gap:6px; flex-wrap:wrap;">
        {% if r.status == 'Active' %}
          <span style="padding:6px 12px; border-radius:999px; background:#22c55e; color:white; font-size:12px;">
            Active
          </span>
        {% elif r.status == 'Busy' %}
          <span style="padding:6px 12px; border-radius:999px; background:#ef4444; color:white; font-size:12px;">
            Busy
          </span>
        {% else %}
          <span style="padding:6px 12px; border-radius:999px; background:#ef4444; color:white; font-size:12px;">
            Inactive
          </span>
        {% endif %}
      </div>
    </a>
  {% endfor %}

  {% if not restaurants %}
    <p style="text-align:center; color:#8ea1c7; font-size:14px;">
      No restaurants found for this filter.
    </p>
  {% endif %}
</div>
{% endblock %}
